function bytesToSize(t){if(!t)return"0 Byte";let e=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,e),2)+" "+["Bytes","KB","MB","GB","TB"][e]}function element(t,e=[],n){const i=document.createElement(t);return e.length&&i.classList.add(...e),n&&(i.textContent=n),i}function upload(t,e={}){const n=document.querySelector(t),i=element("div",["preview"]),a=element("button",["btn"],"Открыть");e.multi&&n.setAttribute("multiple",!0),e.accept&&Array.isArray(e.accept)&&n.setAttribute("accept",e.accept.join(",")),n.insertAdjacentElement("afterend",i),n.insertAdjacentElement("afterend",a),a.addEventListener("click",(function(){n.click()})),n.addEventListener("change",(function(t){if(t.target.files.length){const e=Array.from(t.target.files);i.innerHTML="",e.forEach(t=>{if(t.type.match("image")){const e=new FileReader;e.onload=e=>{const n=e.target.result;i.insertAdjacentHTML("afterbegin",`\n\t\t\t\t\t\t\t<div class="preview__image">\n\t\t\t\t\t\t\t\t<div class="preview__remove">&times;</div>\n\t\t\t\t\t\t\t\t<img src="${n}" alt="${t.name}">\n\t\t\t\t\t\t\t\t<div class="preview__info">\n\t\t\t\t\t\t\t\t\t<span>${t.name}</span>\n\t\t\t\t\t\t\t\t\t${bytesToSize(t.size)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`)},e.readAsDataURL(t)}})}})),i.addEventListener("click",(function(t){const e=t.target;if(e.classList.contains("preview__remove")){const t=e.closest(".preview__image");t.classList.add("removing"),t.addEventListener("transitionend",()=>{t.remove()})}}))}upload("#file",{multi:!0,accept:[".png",".jpg",".jpeg",".gif"]});